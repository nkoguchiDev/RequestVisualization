<source>
  @type tail
  path /var/log/nginx/access.log
  format /^(?<remote>[^ ]*) \[(?<time>[^\]]*)\] (?<method>\S+) (?<path>\S+) (?<code>[^ ]*) (?<size>[^ ]*) (?<req_time>[^ ]*) \[(?<agent>[^\]]*)\] (?<XFF>[^ ]*) (?<req_id>[^ ]*)/
  keep_time_key true
  time_format %d/%b/%Y:%H:%M:%S %z
  tag nginx.access
</source>

<match nginx.access>
   @type stdout
</match>

# <match nginx.access>
#   @type file
#   path /var/log/fluent/myapp
#   time_slice_format %Y%m%d
#   time_slice_wait 10m
#   # time_format %Y%m%dT%H%M%S%z
#   compress gzip
#   # utc
# </match>